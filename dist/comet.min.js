/*!
 * Released under the ISC License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Comet=e()}(this,(function(){"use strict";function t(t,e){this.x=t,this.y=e}function e(t,e){if(!e||!t)return;const{path:o,pathColor:n,cometColor:r}=e;if(!Array.isArray(o))throw Error("path must be array");let i=!1,l=0,s=[],a=[].concat(o);const f=t.getContext("2d");function h(){l++;const t=a[l];if(f.clearRect(0,0,5e3,5e3),n){f.lineWidth=1,f.strokeStyle=n,f.beginPath();for(let t=0;t<a.length-1;t++)f.moveTo(a[t].x,a[t].y),f.lineTo(a[t+1].x,a[t+1].y);f.stroke()}s.length>30&&s.shift();for(let t=0;t<s.length;t++)s[t].a=.03*(t+1),s[t].s=.025*(t+1);const e={a:1,s:1,x:t.x,y:t.y};s.push(e);for(let t=0;t<s.length;t++){const e=s[t];f.save(),f.beginPath(),f.globalAlpha=e.a,f.globalCompositeOperation="lighter",f.fillStyle=r||"#66FF00",f.arc(e.x,e.y,1*e.s,0,2*Math.PI,!1),f.fill(),f.restore()}l===a.length-1&&(l=0),!i&&requestAnimationFrame(h)}return{play:function(){i=!1,h()},stop:function(){i=!0}}}return t.prototype.toString=function(){return`(${this.x}, ${this.y})`},e.Point=t,e.square=function(e){if(!Array.isArray(e))throw Error("path must be array");let o=[],n=null;for(let r of e){if(!n){n=r;continue}const e=r[0]-n[0],i=r[1]-n[1];let l=Math.min(Math.abs(e),Math.abs(i));const s=e/l,a=i/l;for(let e=0;e<l;e++)o.push(new t(n[0]+s*e,n[1]+a*e));n=r}return o.push(new t(n[0],n[1])),o},e}));
