!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Comet=e()}(this,(function(){"use strict";function t(t,e){this.x=t,this.y=e}function e(t,e){if(!e||!t)return;const{path:o,pathColor:n,cometColor:r,pathVisible:i}=e;if(!Array.isArray(o))throw Error("path must be array");let l=!1,s=0,a=[],f=[].concat(o);const h=t.getContext("2d");function u(){s++;const t=f[s];if(h.clearRect(0,0,5e3,5e3),i){h.lineWidth=1,h.strokeStyle=n||"#444444",h.beginPath();for(let t=0;t<f.length-1;t++)h.moveTo(f[t].x,f[t].y),h.lineTo(f[t+1].x,f[t+1].y);h.stroke()}a.length>30&&a.shift();for(let t=0;t<a.length;t++)a[t].a=.03*(t+1),a[t].s=.025*(t+1);const e={a:1,s:1,x:t.x,y:t.y};a.push(e);for(let t=0;t<a.length;t++){const e=a[t];h.save(),h.beginPath(),h.globalAlpha=e.a,h.globalCompositeOperation="lighter",h.fillStyle=r||"#66FF00",h.arc(e.x,e.y,1*e.s,0,2*Math.PI,!1),h.fill(),h.restore()}s===f.length-1&&(s=0),!l&&requestAnimationFrame(u)}return{play:function(){l=!1,u()},stop:function(){l=!0}}}return t.prototype.toString=function(){return`(${this.x}, ${this.y})`},e.Point=t,e.square=function(e){if(!Array.isArray(e))throw Error("path must be array");let o=[],n=null;for(let r of e){if(!n){n=r;continue}const e=r[0]-n[0],i=r[1]-n[1];let l=Math.min(Math.abs(e),Math.abs(i));const s=e/l,a=i/l;for(let e=0;e<l;e++)o.push(new t(n[0]+s*e,n[1]+a*e));n=r}return o.push(new t(n[0],n[1])),o},e}));
//# sourceMappingURL=comet.js.map
